<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/geralRich.xhtml">

	<ui:define name="headComplementar">
		<script src="http://maps.google.com/maps/api/js?sensor=false"
			type="text/javascript"></script>
	</ui:define>

	<ui:define name="titulo">Consulta posições do veículo</ui:define>

	<ui:define name="conteudo">
		<h:form id="form">

			<h:messages id="mensagens" errorStyle="errorMsg" infoStyle="infoMsg" />
			<h:outputLabel value="Veículo " />
			<h:inputText value="#{posicaoVeiculoMb.veiculo.identificacao}">
				<f:ajax execute="@this"
					listener="#{posicaoVeiculoMb.inicializarVeiculo()}"
					render="mensagens" />
			</h:inputText>
			<h:outputLabel value="Data " />
			<rich:calendar value="#{posicaoVeiculoMb.data}"
				enableManualInput="true" datePattern="dd/MM/yyyy">
			</rich:calendar>
			<h:commandButton action="#{posicaoVeiculoMb.listar()}"
				value="Consultar" />
			<br />
			<br />

			<div style="width: 40%">
				<rich:dataTable id="tabPosicoes"
					value="#{posicaoVeiculoMb.posicoes}" var="posicao"
					rows="15">
					<rich:column>
						<f:facet name="header">Data e hora</f:facet>
						<h:outputText value="#{posicao.dataHora}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
						</h:outputText>
					</rich:column>
					<rich:column>
						<f:facet name="header">Lat</f:facet>
						<h:outputText value="#{posicao.lat}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">Lng</f:facet>
						<h:outputText value="#{posicao.lng}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">Velocidade</f:facet>
						<h:outputText value="#{posicao.velocidade}" />
					</rich:column>
				</rich:dataTable>
				<rich:dataScroller for="tabPosicoes" maxPages="5" style="margin: auto"/>
			</div>
		</h:form>
	</ui:define>
</ui:composition>

